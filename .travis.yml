os: linux
language: python
python: "3.7"
dist: bionic

addons:
  apt:
    sources:
      - sourceline: "ppa:ubuntu-toolchain-r/test"
    packages: ['g++-9']
    packages: lcov

compiler:
  - gcc

env:
  - CXX=g++-9

cache:
  directories:
    - $HOME/.conan/data

install:
  - pip install conan
  - conan user

script:
  - mkdir -p build
  - cd build
  - cmake -DCMAKE_BUILD_TYPE=RelWithDebInfo -DBUILD_TESTING=YES -DRUN_TESTS_AFTER_BUILD=YES -DENABLE_CODE_COVERAGE=YES -DPRINT_COVERAGE_REPORT=YES .. 
  - cmake --build . --target all
  - ctest
